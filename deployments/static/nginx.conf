server {
    include /etc/nginx/conf.d/*;
    include /etc/nginx/bots.d/blockbots.conf;
    include /etc/nginx/bots.d/ddos.conf;

    server_names_hash_bucket_size 256;
    server_names_hash_max_size 4096;
    variables_hash_max_size 4096;
    variables_hash_bucket_size 4096;
    limit_req_zone $binary_remote_addr zone=flood:50m rate=90r/s;
    limit_conn_zone $binary_remote_addr zone=addr:50m;


    listen 80;
    listen [::]:80;
    server_name cansu.dev;

    root /var/www/servers/cansu.dev/static/;
    
    autoindex on;

    # Logging
    error_log /var/log/nginx/error.log;
    access_log /var/log/nginx/access.log;

    location ~* \.(jpg|jpeg|png)$ {
        add_header Content-Disposition attachment;
        add_header X-Content-Type-Options nosniff;
        add_header Content-Security-Policy "sandbox; default-src 'none'; frame-ancestors 'none'";
        add_header X-Content-Security-Policy sandbox;
        add_header Cross-Origin-Opener-Policy same-origin;
        add_header Cross-Origin-Embedder-Policy require-corp;
        add_header Cross-Origin-Resource-Policy same-site;
        add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Credentials false;
        add_header Access-Control-Allow-Headers "Accept, Authorization, Cache-Control, Content-Type, DNT, If-Modified-Since, Keep-Alive, Origin, User-Agent, X-Requested-With";
        add_header Access-Control-Allow-Methods "GET, HEAD, OPTIONS";
    }

    location /private/ {
        auth_basic "Protected Area";
        auth_basic_user_file /etc/nginx/htpasswd;
    }
}